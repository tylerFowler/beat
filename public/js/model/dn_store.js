(function(){var $,t,e,n;$=require("jquery"),n=require("underscore"),e=localStorage.getItem("settings").dn,t=function(){function t(t,e,n,r){this.clientId=t,this.clientSecret=e,this.redirectUri=n,this.onlyTop=r,this.dnUri="https://api-news.layervault.com/api/v1"}return t.prototype.getTopStories=function(t,e){return $.getJSON(""+this.dnUri+"/stories?client_id="+this.clientId,{}).done(function(n){return processStories(n.stories.slice(0,t),function(t){return e(null,t)})}).fail(function(t,n,r){return e(r)})},t.prototype.getRecentStories=function(t,e){return $.getJSON(""+this.dnUri+"/stories/recent?client_id="+this.clientId,{}).done(function(n){return processStories(n.stories.slice(0,t),function(t){return e(null,t)})}).fail(function(t,n,r){return e(r)})},t.prototype.processStories=function(t,e){var r;return r=[],n.each(t,function(t,n){var i;return i={title:t.title,url:t.url,upvotes:t.vote_count,author:t.user_display_name,comment_count:t.comments.length},r.push(i),n===limit-1?e(r):void 0})},t}(),module.exports=new t(e.client_id,e.client_secret,e.redirect_uri,e.only_top_stories)}).call(this);
//# sourceMappingURL=./dn_store.js.map